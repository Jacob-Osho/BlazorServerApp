
<div class="table-responsive">
    <table class="table table-striped">
        <thead class="thead-light">
            <tr>
                <th>Name</th>
                <th>Genre</th>
                <th>Release date</th>
                <th> <input type="checkbox" @bind="buttonsIsDisplayed" />Delete</th>

            </tr>
        </thead>
        <tbody>
            <GenericList ListOfIteams="Games">
                <IteamTemplate Context="game">
                    <IndividualGame Game="game" IsTable="true" ButtonsIsDisplayed="buttonsIsDisplayed" DeleteGame="DeleteIteam" />
                </IteamTemplate>
            </GenericList>

            <Confirmation @ref="confirmation" OnCancel="OnCancel" OnConfirm="OnCOnfirm">
                <div class="text-danger">
                    Are you sure want to delete @gameTobeDeleted.Name ?"
                </div>
            </Confirmation>
        </tbody>
    </table>
</div>
<div class="row">
    <div class="col text-center">
        <button @onclick="AddIteam" class="btn btn-success" style="margin-bottom:10px">Add Game</button>
    </div>

</div>
@code
{
    [Parameter] public List<Game> Games { get; set; }

    bool buttonsIsDisplayed = false;
    Confirmation confirmation;
    Game gameTobeDeleted;

    void DeleteIteam(Game game)
    {
        gameTobeDeleted = game;
        confirmation.ShowPanel();
    }
    void AddIteam()
    {
        Games.Add(new Game()
            {
                Name = "Test Game",
                Genre = "Test Genre",
                ReleaseDate = DateTime.Now
            });
    }
    void OnCOnfirm()
    {
        Games.Remove(gameTobeDeleted);
        confirmation.HidePanel();
        gameTobeDeleted = null;

    }
    void OnCancel()
    {
       
        confirmation.HidePanel();
        gameTobeDeleted = null;
    }

    /*------------------*/
    //protected override void OnInitialized()
    //{
    //    Console.WriteLine($"1. OnInitialized().{Games.Count}.");
    //}

    //protected override void OnParametersSet()
    //{
    //    Console.WriteLine($"2. OnParametersSet().{Games.Count}.");
    //}
    //protected override void OnAfterRender(bool firstRender)
    //{
    //    Console.WriteLine($"3. OnParametersSet(). IsRendered1stTime : {firstRender}.");
    //}
    //protected override bool ShouldRender()
    //{
    //    return true;
    //}
    /*------------------*/
}